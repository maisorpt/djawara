From d2ff69749fb777808f78381efe56fbf0c62c3889 Mon Sep 17 00:00:00 2001
From: Maisorpt <maisorpt@gmail.com>
Date: Tue, 9 Dec 2025 23:43:27 +0700
Subject: [PATCH] Revert "ADD: setting channel log, relative time log info"

This reverts commit 792aa763622e321edc48c3356aa391746409acf2.
---
 bot.py                   |   3 +-
 cogs/log_config.py       |  98 -----------------------
 cogs/text_moderation.py  | 168 +++++++++++++++++++--------------------
 cogs/voice_moderation.py |  76 +++++++++++++-----
 config.json              |   3 -
 5 files changed, 141 insertions(+), 207 deletions(-)
 delete mode 100644 cogs/log_config.py
 delete mode 100644 config.json

diff --git a/bot.py b/bot.py
index 804cc22..763cd59 100644
--- a/bot.py
+++ b/bot.py
@@ -1,12 +1,13 @@
 import os
 import asyncio
+from dotenv import load_dotenv
 import discord
 from discord import app_commands
 from discord.ext import commands
-from dotenv import load_dotenv
 
 load_dotenv()
 TOKEN = os.getenv("TOKEN")
+LOG_CHANNEL_ID = int(os.getenv("LOG_CHANNEL_ID") or 0)
 
 if not TOKEN:
     raise SystemExit("ERROR: TOKEN tidak ditemukan. Isi TOKEN di file .env pada root project Anda.")
diff --git a/cogs/log_config.py b/cogs/log_config.py
deleted file mode 100644
index ebc0844..0000000
--- a/cogs/log_config.py
+++ /dev/null
@@ -1,98 +0,0 @@
-# cogs/log_config.py
-import discord
-from discord import app_commands
-from discord.ext import commands, tasks
-import json
-import datetime
-import os
-import pytz
-
-
-CONFIG_FILE = "config.json"
-LOG_EXPIRY_DAYS = 7
-
-# --- HELPER FUNCTIONS (JSON) ---
-
-def load_config():
-    """Memuat konfigurasi dari file JSON."""
-    if not os.path.exists(CONFIG_FILE):
-        return {}
-    with open(CONFIG_FILE, 'r') as f:
-        return json.load(f)
-
-def save_config(config):
-    """Menyimpan konfigurasi ke file JSON."""
-    with open(CONFIG_FILE, 'w') as f:
-        json.dump(config, f, indent=4)
-
-def get_log_channel_id(guild_id: int) -> int | None:
-    """Mendapatkan ID channel log untuk guild tertentu."""
-    config = load_config()
-    return int(config.get(str(guild_id))) if str(guild_id) in config else None
-
-# --- COG CLASS ---
-
-class LogConfig(commands.Cog):
-    def __init__(self, bot: commands.Bot):
-        self.bot = bot
-        self.log_cleanup_task.start()
-
-    def cog_unload(self):
-        self.log_cleanup_task.cancel()
-        
-    # --- COMMAND: /setlogchannel ---
-    @app_commands.command(name="setlogchannel", description="Menetapkan channel log.")
-    @app_commands.default_permissions(administrator=True) 
-    async def set_log_channel(self, interaction: discord.Interaction, channel: discord.TextChannel):
-        guild_id = str(interaction.guild_id)
-        config = load_config()
-        
-        config[guild_id] = channel.id
-        save_config(config)
-        
-        await interaction.response.send_message(
-            f"‚úÖ Channel log moderasi berhasil diatur ke {channel.mention}.",
-            ephemeral=False
-        )
-        
-    # --- BACKGROUND TASK: Auto Delete Log ---
-    @tasks.loop(hours=24)
-    async def log_cleanup_task(self):
-        await self.bot.wait_until_ready() 
-        
-        print("Mulai tugas pembersihan log...")
-        
-        config = load_config()
-        
-        seven_days_ago = datetime.datetime.now(pytz.utc) - datetime.timedelta(days=LOG_EXPIRY_DAYS)
-        
-        for guild_id_str, channel_id in config.items():
-            guild = self.bot.get_guild(int(guild_id_str))
-            if not guild:
-                continue
-
-            log_channel = self.bot.get_channel(channel_id)
-
-            if log_channel and isinstance(log_channel, discord.TextChannel):
-                try:
-                    deleted = await log_channel.purge(
-                        before=seven_days_ago,
-                        limit=None
-                    )
-                    print(f"[{guild.name}] Berhasil menghapus {len(deleted)} pesan log lama.")
-                    
-                except discord.Forbidden:
-                    print(f"ERROR: Bot tidak memiliki izin Manage Messages di log channel {log_channel.name} ({guild.name}).")
-                except Exception as e:
-                    print(f"ERROR: Gagal membersihkan log di {log_channel.name} ({guild.name}): {e}")
-
-        print("Tugas pembersihan log selesai.")
-
-    @log_cleanup_task.before_loop
-    async def before_log_cleanup_task(self):
-        print("Menunggu bot siap untuk memulai tugas pembersihan log...")
-
-# --- SETUP COG ---
-
-async def setup(bot: commands.Bot):
-    await bot.add_cog(LogConfig(bot))
\ No newline at end of file
diff --git a/cogs/text_moderation.py b/cogs/text_moderation.py
index d05a83d..7f9a956 100644
--- a/cogs/text_moderation.py
+++ b/cogs/text_moderation.py
@@ -1,30 +1,18 @@
 import discord
 from discord import app_commands
 from discord.ext import commands
-from .log_config import get_log_channel_id
 import datetime
-import pytz
+import os
 
-JAKARTA_TZ = pytz.timezone('Asia/Jakarta')
+LOG_CHANNEL_ID = int(os.getenv("LOG_CHANNEL_ID") or 0)
 
 class TextModeration(commands.Cog):
     def __init__(self, bot: commands.Bot):
         self.bot = bot
 
     async def log_action(self, interaction: discord.Interaction, title: str, description: str, color=discord.Color.dark_gold()):
-        log_channel_id = get_log_channel_id(interaction.guild_id)
-        
-        if not log_channel_id:
-             return
-             
-        log_ch = self.bot.get_channel(log_channel_id)
-        
-        if not log_ch:
-            return
-        
-        now_wib = datetime.datetime.now(JAKARTA_TZ)
-        
-        embed = discord.Embed(title=title, description=description, color=color, timestamp=now_wib)
+        log_ch = self.bot.get_channel(LOG_CHANNEL_ID)
+        embed = discord.Embed(title=title, description=description, color=color, timestamp=datetime.datetime.utcnow())
         embed.set_author(name=str(interaction.user), icon_url=getattr(interaction.user, "avatar.url", None) if hasattr(interaction.user, "avatar") else None)
         if log_ch:
             try:
@@ -32,46 +20,6 @@ class TextModeration(commands.Cog):
             except Exception:
                 pass
 
-    async def log_deleted_message_details(self, moderator: discord.User, target_msg: discord.Message, reason: str):
-        """Mem-forward pesan target ke channel log sebelum dihapus."""
-        
-        log_channel_id = get_log_channel_id(target_msg.guild.id)
-        
-        if not log_channel_id:
-            return
-
-        log_ch = self.bot.get_channel(log_channel_id)
-        if not log_ch:
-            return
-        
-        msg_time_utc = target_msg.created_at 
-        
-        unix_timestamp = int(msg_time_utc.timestamp())
-        
-        dynamic_time_full = f"<t:{unix_timestamp}:F>"
-        dynamic_time_relative = f"<t:{unix_timestamp}:R>"
-
-        now_wib = datetime.datetime.now(JAKARTA_TZ)
-        
-        context_embed = discord.Embed(
-            title=f"üóëÔ∏è Pesan Dihapus oleh {moderator.display_name}",
-            description=(
-                f"**Target:** {target_msg.author.mention}`)\n"
-                f"**Channel:** {target_msg.channel.mention}\n"
-                f"**Waktu Pesan:** {dynamic_time_full} ({dynamic_time_relative})\n"
-                f"**Alasan:** {reason if reason else 'Tidak ada alasan'}"
-            ),
-            color=discord.Color.dark_red(),
-            timestamp=now_wib
-        )
-        context_embed.set_footer(text=f"ID Pesan: {target_msg.id}")
-        await log_ch.send(embed=context_embed)
-
-        try:
-            await target_msg.forward(log_ch)
-        except Exception as e:
-            await log_ch.send(f"‚ö†Ô∏è Gagal mem-forward pesan asli (ID: {target_msg.id}). Error: {e}")
-            
     async def cog_app_command_error(self, interaction: discord.Interaction, error: app_commands.AppCommandError):
         if isinstance(error, app_commands.CommandOnCooldown):
             await interaction.response.send_message(f"Perintah sedang cooldown. Coba lagi setelah {error.retry_after:.1f}s.", ephemeral=True)
@@ -80,60 +28,108 @@ class TextModeration(commands.Cog):
             await interaction.response.send_message("Anda tidak memiliki izin yang dibutuhkan untuk menjalankan perintah ini.", ephemeral=True)
             return
         try:
-            await (interaction.followup.send if interaction.response.is_done() else interaction.response.send_message)(f"Terjadi error: {str(error)}", ephemeral=True)
+            await interaction.response.send_message(f"Terjadi error: {str(error)}", ephemeral=True)
         except Exception:
             pass
 
+    # Handler (tidak terdaftar jika versi lama); tetap tersedia jika nanti ingin didaftarkan
+    async def delete_message(self, interaction: discord.Interaction, message: discord.Message):
+        if not interaction.user.guild_permissions.manage_messages:
+            await interaction.response.send_message("Anda tidak memiliki izin Manage Messages.", ephemeral=True)
+            return
+
+        await interaction.response.defer(thinking=True, ephemeral=True)
+        target = message
+
+        content = target.content or ""
+        attachments = [a.url for a in target.attachments] if target.attachments else []
+        log_lines = [
+            f"Moderator: {interaction.user} ({interaction.user.id})",
+            f"Message Author: {target.author} ({target.author.id})",
+            f"Channel: {target.channel} ({target.channel.id})",
+            "Content:",
+            "```",
+            content if content else "[no text content]",
+            "```"
+        ]
+        if attachments:
+            log_lines.append("Attachments:")
+            for a in attachments:
+                log_lines.append(a)
+
+        log_ch = self.bot.get_channel(LOG_CHANNEL_ID)
+        try:
+            if log_ch:
+                await log_ch.send("\n".join(log_lines))
+        except Exception:
+            pass
+
+        try:
+            await target.delete()
+            # tidak mengirim notifikasi ke channel utama; hanya log ke LOG_CHANNEL_ID dan embed via log_action
+            await self.log_action(interaction, "Message Deleted", f"Deleted message by {target.author} ({target.author.id}) in <#{target.channel.id}>", color=discord.Color.red())
+        except discord.Forbidden:
+            await interaction.followup.send("Bot tidak memiliki izin untuk menghapus pesan.", ephemeral=True)
+        except Exception as e:
+            await interaction.followup.send(f"Gagal menghapus pesan: {e}", ephemeral=True)
 
     @commands.command(name="delete", aliases=["del"])
-    @commands.has_permissions(manage_messages=True)
     async def delete_cmd(self, ctx: commands.Context, *, reason: str = None):
         """Reply ke pesan yang ingin dihapus lalu jalankan: !delete [alasan]"""
-        
         ref = ctx.message.reference
         if not ref:
             await ctx.send("Harap reply pesan yang ingin dihapus.", delete_after=8)
             return
-        
         try:
             target = ref.resolved if getattr(ref, "resolved", None) else await ctx.channel.fetch_message(ref.message_id)
-        except discord.NotFound:
-             await ctx.send("Pesan target tidak ditemukan.", delete_after=8)
-             return
         except Exception as e:
             await ctx.send(f"Gagal mengambil pesan: {e}", delete_after=8)
             return
 
-        await self.log_deleted_message_details(
-            moderator=ctx.author,
-            target_msg=target,
-            reason=reason
-        )
+        content = target.content or ""
+        attachments = [a.url for a in target.attachments] if target.attachments else []
+        log_lines = [
+            f"Moderator: {ctx.author} ({ctx.author.id})",
+            f"Message Author: {target.author} ({target.author.id})",
+            f"Channel: {target.channel} ({target.channel.id})",
+            f"Reason: {reason or '‚Äî'}",
+            "Content:",
+            "```",
+            content if content else "[no text content]",
+            "```",
+        ]
+        if attachments:
+            log_lines.append("Attachments:")
+            log_lines.extend(attachments)
 
+        log_ch = self.bot.get_channel(LOG_CHANNEL_ID)
         try:
-            await target.delete()
-            
-            await ctx.message.delete() 
-            confirm_embed = discord.Embed(
-                description=f"üóëÔ∏è Pesan dari **{target.author.mention}** telah dihapus oleh {ctx.author.mention}.",
-                color=discord.Color.red()
-            )
-            if reason:
-                confirm_embed.set_footer(text=f"Alasan: {reason}")
-                
-            await ctx.send(embed=confirm_embed)
+            if log_ch:
+                await log_ch.send("\n".join(log_lines))
+        except Exception:
+            pass
 
+        try:
+            await target.delete()
+            # hapus notifikasi di channel utama ‚Äî tidak mengirim ctx.send konfirmasi
+            try:
+                embed = discord.Embed(
+                    title="Message Deleted",
+                    description=f"Deleted message by {target.author} ({target.author.id}) in <#{target.channel.id}>",
+                    color=discord.Color.red(),
+                    timestamp=datetime.datetime.utcnow()
+                )
+                embed.set_author(name=str(ctx.author), icon_url=getattr(ctx.author, "avatar.url", None) if hasattr(ctx.author, "avatar") else None)
+                embed.set_footer(text=f"Guild: {ctx.guild.id if ctx.guild else 'DM'}")
+                if log_ch:
+                    await log_ch.send(embed=embed)
+            except Exception:
+                pass
         except discord.Forbidden:
-            await ctx.send("Bot tidak memiliki izin untuk menghapus pesan target atau pesan command.", delete_after=8)
+            await ctx.send("Bot tidak memiliki izin untuk menghapus pesan.", delete_after=8)
         except Exception as e:
-            await self.log_action(
-                ctx, 
-                title="‚ùå Gagal Operasi Delete", 
-                description=f"Gagal menghapus pesan/mengirim konfirmasi:\n{e}"
-            )
             await ctx.send(f"Gagal menghapus pesan: {e}", delete_after=8)
 
-
 async def setup(bot: commands.Bot):
     cog = TextModeration(bot)
     await bot.add_cog(cog)
\ No newline at end of file
diff --git a/cogs/voice_moderation.py b/cogs/voice_moderation.py
index c5612de..4239e3f 100644
--- a/cogs/voice_moderation.py
+++ b/cogs/voice_moderation.py
@@ -1,13 +1,12 @@
 import discord
 from discord import app_commands
 from discord.ext import commands
-from .log_config import get_log_channel_id
 import typing
 import datetime
-import pytz
+import os
 import re
 
-JAKARTA_TZ = pytz.timezone('Asia/Jakarta')
+LOG_CHANNEL_ID = int(os.getenv("LOG_CHANNEL_ID", "0"))
 
 class ActiveVoiceChannel(app_commands.Transform):
     @classmethod
@@ -23,19 +22,8 @@ class VoiceModeration(commands.Cog):
         self.bot = bot
 
     async def log_action(self, interaction: discord.Interaction, title: str, description: str, color=discord.Color.orange()):
-        log_channel_id = get_log_channel_id(interaction.guild_id)
-        
-        if not log_channel_id:
-             return
-             
-        log_ch = self.bot.get_channel(log_channel_id)
-        
-        if not log_ch:
-            return
-        
-        now_wib = datetime.datetime.now(JAKARTA_TZ)
-
-        embed = discord.Embed(title=title, description=description, color=color, timestamp=now_wib)
+        log_ch = self.bot.get_channel(LOG_CHANNEL_ID)
+        embed = discord.Embed(title=title, description=description, color=color, timestamp=datetime.datetime.utcnow())
         embed.set_author(name=str(interaction.user), icon_url=getattr(interaction.user, "avatar.url", None) if hasattr(interaction.user, "avatar") else None)
         embed.set_footer(text=f"Guild: {interaction.guild.id if interaction.guild else 'DM'}")
         if log_ch:
@@ -74,6 +62,7 @@ class VoiceModeration(commands.Cog):
         return None
 
     def _member_label(self, m: discord.Member) -> str:
+        # label: display_name ‚Äî username#discriminator (no id)
         disc = getattr(m, "discriminator", None)
         uname = f"{m.name}#{disc}" if disc is not None else m.name
         return f"{m.display_name} ‚Äî {uname}"
@@ -82,6 +71,7 @@ class VoiceModeration(commands.Cog):
     _ID_RE = re.compile(r"^\s*(\d+)\s*$")
 
     def _parse_user_ids_from_string(self, s: str) -> typing.List[int]:
+        # accepts comma separated mentions or numeric ids or mixed
         ids: typing.List[int] = []
         for part in [p.strip() for p in s.split(",") if p.strip()]:
             m = self._MENTION_RE.match(part)
@@ -111,8 +101,10 @@ class VoiceModeration(commands.Cog):
         for m in guild.members:
             if not (m.voice and m.voice.channel):
                 continue
+            # Only show members in channels accessible by invoker
             if not self._can_connect(m.voice.channel, invoker):
                 continue
+            # filter by command state
             if cmd == "mute" and getattr(m.voice, "mute", False):
                 continue
             if cmd == "unmute" and not getattr(m.voice, "mute", False):
@@ -128,17 +120,21 @@ class VoiceModeration(commands.Cog):
         return choices[:25]
 
     async def _dcbulk_users_autocomplete(self, interaction: discord.Interaction, current: str) -> typing.List[app_commands.Choice]:
+        # autocomplete untuk user1, user2, user3, dst
+        # exclude users yang sudah ditambahkan di parameter sebelumnya
         guild = interaction.guild
         if not guild:
             return []
         invoker = interaction.user
         
+        # parse users dari parameter sebelumnya
         selected_ids = []
         data = getattr(interaction, "data", None)
         if data:
             opts = data.get("options") or []
             for o in opts:
                 name = o.get("name")
+                # user1, user2, user3, ... parameter
                 if name and name.startswith("user"):
                     val = o.get("value")
                     if val:
@@ -149,8 +145,10 @@ class VoiceModeration(commands.Cog):
         for m in guild.members:
             if not (m.voice and m.voice.channel):
                 continue
+            # Only show members in channels accessible by invoker
             if not self._can_connect(m.voice.channel, invoker):
                 continue
+            # Exclude already selected users
             if m.id in selected_ids:
                 continue
             label = self._member_label(m)
@@ -160,17 +158,21 @@ class VoiceModeration(commands.Cog):
         return choices[:25]
 
     async def _movebulk_users_autocomplete(self, interaction: discord.Interaction, current: str) -> typing.List[app_commands.Choice]:
+        # autocomplete untuk user1, user2, user3, dst
+        # exclude users yang sudah ditambahkan di parameter sebelumnya
         guild = interaction.guild
         if not guild:
             return []
         invoker = interaction.user
         
+        # parse users dari parameter sebelumnya
         selected_ids = []
         data = getattr(interaction, "data", None)
         if data:
             opts = data.get("options") or []
             for o in opts:
                 name = o.get("name")
+                # user1, user2, user3, ... parameter
                 if name and name.startswith("user"):
                     val = o.get("value")
                     if val:
@@ -181,8 +183,10 @@ class VoiceModeration(commands.Cog):
         for m in guild.members:
             if not (m.voice and m.voice.channel):
                 continue
+            # Only show members in channels accessible by invoker
             if not self._can_connect(m.voice.channel, invoker):
                 continue
+            # Exclude already selected users
             if m.id in selected_ids:
                 continue
             label = self._member_label(m)
@@ -193,22 +197,29 @@ class VoiceModeration(commands.Cog):
     
     async def _voice_channel_source_autocomplete(self, interaction: discord.Interaction, current: str) -> typing.List[app_commands.Choice]:
         guild = interaction.guild
+        # Keluar jika interaksi tidak terjadi di guild
         if not guild:
             return []
 
+        # Dapatkan anggota yang memanggil perintah (invoker)
         invoker = interaction.user 
         
         choices = []
         
+        # 1. Perulangan melalui semua voice channels
         for ch in guild.voice_channels:
             
+            # 2. Periksa apakah invoker memiliki izin untuk melihat (VIEW_CHANNEL) VC ini
+            #    dan terhubung (CONNECT) ke VC ini.
             permissions = ch.permissions_for(invoker)
             if not permissions.view_channel or not permissions.connect:
-                continue
+                continue  # Abaikan jika invoker tidak dapat melihat atau terhubung
 
+            # 3. Periksa apakah VC memiliki user (Seperti yang sudah ada di kode Anda)
             if len(ch.members) == 0:
                 continue
                 
+            # Jika semua pemeriksaan lolos:
             label = f"{ch.name} ({len(ch.members)} user)"
             
             if not current or current.lower() in label.lower():
@@ -217,6 +228,7 @@ class VoiceModeration(commands.Cog):
         return choices[:25]
 
     async def _voice_channel_destination_for_target_autocomplete(self, interaction: discord.Interaction, current: str) -> typing.List[app_commands.Choice]:
+        # destination: accessible by target member AND invoker
         guild = interaction.guild
         if not guild:
             return []
@@ -232,8 +244,10 @@ class VoiceModeration(commands.Cog):
             return []
         choices = []
         for ch in guild.voice_channels:
+            # exclude target's current channel
             if target_member.voice and target_member.voice.channel and ch.id == target_member.voice.channel.id:
                 continue
+            # require destination accessible by both target_member AND invoker
             if not self._can_connect(ch, target_member):
                 continue
             if not self._can_connect(ch, invoker):
@@ -244,30 +258,35 @@ class VoiceModeration(commands.Cog):
         return choices[:25]
 
     async def _voice_channel_destination_for_bulk_autocomplete(self, interaction: discord.Interaction, current: str) -> typing.List[app_commands.Choice]:
+        # destination for movebulk: channels accessible by ALL selected members AND invoker
         guild = interaction.guild
         if not guild:
             return []
         invoker = interaction.user
         
-
+        # --- PERBAIKAN DI SINI (Identifikasi User) ---
         all_user_values = []
-        for i in range(1, 6):
+        for i in range(1, 6): # user1 hingga user5
             user_val = getattr(interaction.namespace, f'user{i}', None)
             if user_val:
                 all_user_values.append(user_val)
         
         combined_user_mentions = ", ".join(all_user_values)
         ids = self._parse_user_ids_from_string(combined_user_mentions)
+        # --- AKHIR PERBAIKAN (Identifikasi User) ---
         
+        # 1. TEMUKAN VC ASAL DAN SIMPAN DALAM SET
         source_vcs = set()
         
         if not ids:
+            # Jika belum ada user yang dipilih, hanya tampilkan VC yang dapat diakses invoker
             members = []
         else:
             members = [guild.get_member(i) for i in ids if guild.get_member(i)]
             if not members:
                 return []
             
+            # Tambahkan ID VC asal dari setiap member ke set source_vcs
             for m in members:
                 if m.voice and m.voice.channel:
                     source_vcs.add(m.voice.channel.id)
@@ -275,15 +294,19 @@ class VoiceModeration(commands.Cog):
         choices = []
         for ch in guild.voice_channels:
             
+            # 2. LOGIKA EKSKLUSI: Lewati VC asal yang sudah teridentifikasi
             if ch.id in source_vcs:
                 continue
             
+            # Check for permissions for all selected members
             ok = True
             for m in members:
+                # Menggunakan _can_connect
                 if not self._can_connect(ch, m):
                     ok = False
                     break
             
+            # Also check invoker can access
             if not self._can_connect(ch, invoker):
                 ok = False
                 
@@ -297,6 +320,7 @@ class VoiceModeration(commands.Cog):
         return choices[:25]
 
     async def _voice_channel_destination_for_source_autocomplete(self, interaction: discord.Interaction, current: str) -> typing.List[app_commands.Choice]:
+        # destination options for movechannel: accessible by all members in source AND invoker
         guild = interaction.guild
         if not guild:
             return []
@@ -318,6 +342,7 @@ class VoiceModeration(commands.Cog):
                 if not ch.permissions_for(m).view_channel or not ch.permissions_for(m).connect:
                     ok = False
                     break
+            # Also check invoker can access
             if not self._can_connect(ch, invoker):
                 ok = False
             if not ok:
@@ -506,21 +531,28 @@ class VoiceModeration(commands.Cog):
     ):
         await interaction.response.defer(thinking=True, ephemeral=True)
         
+        # Combine all user parameters
         all_users = [u for u in [user1, user2, user3, user4, user5] if u]
         combined = ", ".join(all_users)
         
         ids = self._parse_user_ids_from_string(combined)
 
+        # Inisialisasi daftar anggota yang valid untuk dipindahkan
         valid_members = []
+         # Inisialisasi dictionary untuk melacak channel asal
         original_channels = {}
 
+        # Memvalidasi dan Mengumpulkan anggota yang sedang di voice channel
         for member_id in ids:
             m = interaction.guild.get_member(member_id)
             
+            # Cek apakah anggota ditemukan DAN sedang di voice channel
             if m and m.voice and m.voice.channel:
                 valid_members.append(m)
+                # Simpan nama channel asal SEBELUM aksi pemindahan
                 original_channels[m.id] = (m.voice.channel.id, m.voice.channel.name)
             elif m:
+                # Jika user valid tapi tidak di voice channel, catat sebagai skipped
                 original_channels[m.id] = (0, "ERROR: Tidak di Voice")
 
         if not valid_members:
@@ -532,6 +564,7 @@ class VoiceModeration(commands.Cog):
         if not isinstance(dest, discord.VoiceChannel):
             await interaction.followup.send("Channel tujuan tidak valid.", ephemeral=True)
             return
+        # ensure destination accessible by all selected members
         for m in valid_members:
             if not self._can_connect(dest, m):
                 await interaction.followup.send("Channel tidak dapat diakses oleh salah satu member yang dipilih.", ephemeral=True)
@@ -543,12 +576,14 @@ class VoiceModeration(commands.Cog):
         for m in valid_members:
             source_id = original_channels.get(m.id, (0, ))[0]
             source_name = original_channels.get(m.id, ("ERROR: Unknown", ))[1]
+            # Pengecekan tambahan: pastikan tidak pindah ke channel yang sama
         try:
             if m.voice.channel.id == dest.id:
                 results_for_logs.append(f"SKIP: {m.display_name} sudah berada di üîä {dest.name}")
                 results_for_display.append(f"SKIP: {m.display_name} sudah berada di <#{dest.id}>")
 
             await m.move_to(dest, reason=reason)
+            # Catat hasil pemindahan: [Anggota] (Channel Asal -> Channel Tujuan)
             moved_count += 1
 
             results_for_logs.append(f"{m.display_name} dari üîä {source_name}")
@@ -588,6 +623,7 @@ class VoiceModeration(commands.Cog):
         if not isinstance(dest, discord.VoiceChannel):
             await interaction.response.send_message("Channel tujuan tidak valid.", ephemeral=True)
             return
+        # ensure destination accessible by all members in source
         for m in src.members:
             if not self._can_connect(dest, m):
                 await interaction.response.send_message("Channel tujuan tidak dapat diakses oleh semua member di source.", ephemeral=True)
@@ -605,6 +641,7 @@ class VoiceModeration(commands.Cog):
                 moved_count += 1
 
                 await m.move_to(dest, reason=reason)
+                # Catat hasil pemindahan: [Anggota] (Channel Asal -> Channel Tujuan)
                 results(f"{m.display_name}")
             except Exception as e:
                 results.append(f"‚ùå {m.display_name} ({src.name}) -> Error: {e}")
@@ -683,6 +720,7 @@ class VoiceModeration(commands.Cog):
     ):
         await interaction.response.defer(thinking=True)
         
+        # Combine all user parameters
         all_users = [u for u in [user1, user2, user3, user4, user5] if u]
         combined = ", ".join(all_users)
         
diff --git a/config.json b/config.json
deleted file mode 100644
index d6067e4..0000000
--- a/config.json
+++ /dev/null
@@ -1,3 +0,0 @@
-{
-    "1440717816809525292": 1446379519421448323
-}
\ No newline at end of file
-- 
2.52.0.windows.1

